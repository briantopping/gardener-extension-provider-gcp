version: "2"
run:
  concurrency: 4
linters:
  enable:
    - revive
  disable:
    - unused
  settings:
    importas:
      alias:
        # External imported packages
        - pkg: k8s.io/api/(\w+)/(v[\w\d]+)
          alias: $1$2
        - pkg: k8s.io/apimachinery/pkg/apis/(\w+)/(v[\w\d]+)
          alias: $1$2
        - pkg: k8s.io/apimachinery/pkg/api/([^m]\w+)
          alias: api${1}
        - pkg: k8s.io/apimachinery/pkg/util/(\w+)
          alias: util${1}
        - pkg: k8s.io/autoscaler/vertical-pod-autoscaler/pkg/apis/autoscaling.k8s.io/v1
          alias: vpaautoscalingv1
        - pkg: sigs.k8s.io/controller-runtime/pkg/client/fake
          alias: fakeclient
        - pkg: sigs.k8s.io/controller-runtime/pkg/log/zap
          alias: logzap
        - pkg: sigs.k8s.io/controller-runtime/pkg/log
          alias: logf
        - pkg: go.uber.org/mock/gomock
          alias: gmock
        # gardener/gardener packages
        - pkg: github.com/gardener/gardener/pkg/component/(\w+)/constants
          alias: ${1}constants
        - pkg: github.com/gardener/gardener/extensions/pkg/webhook
          alias: extensionswebhook
        - pkg: github.com/gardener/gardener/extensions/pkg/util/secret/manager
          alias: extensionssecretmanager
        - pkg: github.com/gardener/gardener/pkg/utils/gardener
          alias: gutil
        - pkg: github.com/gardener/gardener/pkg/utils/kubernetes
          alias: kutil
    loggercheck:
      require-string-key: true
      no-printf-like: true
    misspell:
      mode: restricted # only check comments
    revive:
      rules:
        - name: duplicated-imports
        - name: unused-parameter
        - name: unreachable-code
        - name: context-as-argument
        - name: early-return
        - name: exported
  exclusions:
    generated: lax
    rules:
      - linters:
          - staticcheck
        text: 'SA1019:'
      - path: (.+)\.go$
        text: var-naming
      - path: (.+)\.go$
        text: dot-imports
      - path: (.+)\.go$
        text: package-comments
      - path: (.+)\.go$
        text: indent-error-flow
      - path: (.+)\.go$
        text: unexported-return
      - path: (.+)\.go$
        text: 'exported: (type|func) name will be used as .* by other packages, and that stutters;'
      - path: (.+)\.go$
        text: 'undeclared name: `.*`'
      - path: (.+)\.go$
        text: '".*" imported but not used'
    paths:
      - third_party$
      - builtin$
      - examples$
formatters:
  settings:
    gofmt:
      rewrite-rules:
        - pattern: interface{}
          replacement: any
  exclusions:
    generated: lax
    paths:
      - third_party$
      - builtin$
      - examples$
